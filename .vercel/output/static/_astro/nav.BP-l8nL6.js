import{j as r}from"./jsx-runtime.CDeAccHH.js";import{r as e}from"./index.AGWyUyCC.js";import{u as P,f as I,M as K,a as _,P as H,L as O,m as j}from"./motion.DW-nebHY.js";import"./index.D2MAbzvX.js";function L(){const n=e.useRef(!1);return P(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function T(){const n=L(),[s,t]=e.useState(0),o=e.useCallback(()=>{n.current&&t(s+1)},[s]);return[e.useCallback(()=>I.postRender(o),[o]),s]}class U extends e.Component{getSnapshotBeforeUpdate(s){const t=this.props.childRef.current;if(t&&s.isPresent&&!this.props.isPresent){const o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function $({children:n,isPresent:s}){const t=e.useId(),o=e.useRef(null),u=e.useRef({width:0,height:0,top:0,left:0}),{nonce:d}=e.useContext(K);return e.useInsertionEffect(()=>{const{width:c,height:i,top:p,left:m}=u.current;if(s||!o.current||!c||!i)return;o.current.dataset.motionPopId=t;const a=document.createElement("style");return d&&(a.nonce=d),document.head.appendChild(a),a.sheet&&a.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${i}px !important;
            top: ${p}px !important;
            left: ${m}px !important;
          }
        `),()=>{document.head.removeChild(a)}},[s]),e.createElement(U,{isPresent:s,childRef:o,sizeRef:u},e.cloneElement(n,{ref:o}))}const N=({children:n,initial:s,isPresent:t,onExitComplete:o,custom:u,presenceAffectsLayout:d,mode:c})=>{const i=_(W),p=e.useId(),m=e.useMemo(()=>({id:p,initial:s,isPresent:t,custom:u,onExitComplete:a=>{i.set(a,!0);for(const f of i.values())if(!f)return;o&&o()},register:a=>(i.set(a,!1),()=>i.delete(a))}),d?void 0:[t]);return e.useMemo(()=>{i.forEach((a,f)=>i.set(f,!1))},[t]),e.useEffect(()=>{!t&&!i.size&&o&&o()},[t]),c==="popLayout"&&(n=e.createElement($,{isPresent:t},n)),e.createElement(H.Provider,{value:m},n)};function W(){return new Map}function B(n){return e.useEffect(()=>()=>n(),[])}const x=n=>n.key||"";function Z(n,s){n.forEach(t=>{const o=x(t);s.set(o,t)})}function D(n){const s=[];return e.Children.forEach(n,t=>{e.isValidElement(t)&&s.push(t)}),s}const G=({children:n,custom:s,initial:t=!0,onExitComplete:o,exitBeforeEnter:u,presenceAffectsLayout:d=!0,mode:c="sync"})=>{const i=e.useContext(O).forceRender||T()[0],p=L(),m=D(n);let a=m;const f=e.useRef(new Map).current,C=e.useRef(a),g=e.useRef(new Map).current,b=e.useRef(!0);if(P(()=>{b.current=!1,Z(m,g),C.current=a}),B(()=>{b.current=!0,g.clear(),f.clear()}),b.current)return e.createElement(e.Fragment,null,a.map(l=>e.createElement(N,{key:x(l),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:d,mode:c},l)));a=[...a];const k=C.current.map(x),E=m.map(x),z=k.length;for(let l=0;l<z;l++){const h=k[l];E.indexOf(h)===-1&&!f.has(h)&&f.set(h,void 0)}return c==="wait"&&f.size&&(a=[]),f.forEach((l,h)=>{if(E.indexOf(h)!==-1)return;const R=g.get(h);if(!R)return;const S=k.indexOf(h);let w=l;if(!w){const F=()=>{f.delete(h);const v=Array.from(g.keys()).filter(y=>!E.includes(y));if(v.forEach(y=>g.delete(y)),C.current=m.filter(y=>{const M=x(y);return M===h||v.includes(M)}),!f.size){if(p.current===!1)return;i(),o&&o()}};w=e.createElement(N,{key:x(R),isPresent:!1,onExitComplete:F,custom:s,presenceAffectsLayout:d,mode:c},R),f.set(h,w)}a.splice(S,0,w)}),a=a.map(l=>{const h=l.key;return f.has(h)?l:e.createElement(N,{key:x(l),isPresent:!0,presenceAffectsLayout:d,mode:c},l)}),e.createElement(e.Fragment,null,f.size?a:a.map(l=>e.cloneElement(l)))};function Q(n,s=!1){const[t,o]=e.useState(()=>typeof window>"u"?s:window.matchMedia(n).matches);return e.useEffect(()=>{const u=window.matchMedia(n),d=()=>{o(u.matches)};return u.addEventListener("change",d),()=>{u.removeEventListener("change",d)}},[n]),t}const Y=()=>{const n=Q("(min-width: 1280px)"),[s,t]=e.useState(!1),[o,u]=e.useState(null);e.useEffect(()=>{(async()=>{try{const i=await fetch("/api/checksession");if(!i.ok)throw new Error("Session invalid");const p=await i.json();u(p.user)}catch(i){console.error("Failed to fetch user:",i),u(null)}})()},[]);const d=async()=>{try{if(!(await fetch("/api/logout",{method:"POST",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to log out");u(null),localStorage.clear(),window.location.href="/"}catch(c){console.error("Logout error:",c)}};return r.jsx("header",{className:"w-full h-16 md:h-20 fixed bg-white shadow-[0_0_2px_0_rgb(0,0,0,0.2)] z-40",children:r.jsxs("div",{className:"h-full container mx-auto px-8 lg:px-32 flex justify-between items-center",children:[r.jsxs("a",{href:"/",className:"text-xl lg:text-2xl font-bold text-black",children:["apmcXdb",r.jsx("span",{className:"text-primary",children:"Net"})]}),n&&r.jsx("nav",{children:r.jsxs("ul",{className:"flex justify-between items-center gap-6",children:[r.jsx("li",{children:r.jsxs("a",{className:"hover:text-primary transition-all duration-200 ease-in-out",href:"/",children:[" ","Home"]})}),r.jsx("li",{children:r.jsx("a",{className:"hover:text-primary transition-all duration-200 ease-in-out",href:"#Product",children:"Product & Layanan"})}),r.jsx("li",{children:r.jsx("a",{className:"hover:text-primary transition-all duration-200 ease-in-out",href:"#Region",children:"Cakupan Wilayah"})})]})}),!n&&r.jsxs("button",{onClick:()=>t(c=>!c),className:"space-y-1.5 z-50",name:"HumburgerMenu",children:[r.jsx(j.span,{animate:{rotateZ:s?45:0,y:s?8:0},className:"block w-8 h-0.5 bg-black rounded"}),r.jsx(j.span,{animate:{width:s?0:24},className:"block w-6 h-0.5 bg-black rounded",children:" "}),r.jsx(j.span,{animate:{rotateZ:s?-45:0,y:s?-8:0,width:s?32:16},className:"block w-4 h-0.5 bg-black rounded",children:" "})]}),r.jsx(G,{children:s&&!n&&r.jsx(j.div,{initial:{opacity:0,x:35},animate:{opacity:1,x:0},exit:{opacity:0,x:35},className:"w-full h-screen fixed bottom-0 left-0 flex justify-center items-center bg-white text-black",children:r.jsxs("ul",{className:"flex flex-col gap-16 text-lg",children:[r.jsx("li",{children:r.jsxs("a",{onClick:()=>t(!1),href:"/",children:[" ","Home"]})}),r.jsx("li",{children:r.jsx("a",{onClick:()=>t(!1),href:"#Product",children:"Product & Layanan"})}),r.jsx("li",{children:r.jsx("a",{onClick:()=>t(!1),href:"#Region",children:"Cakupan Wilayah"})}),o&&r.jsx("li",{children:r.jsx("button",{onClick:d,className:"w-full py-1 border border-dark rounded-md",children:"Log out"})})]})})}),n&&r.jsxs("div",{className:"flex items-center gap-8",children:[r.jsx("a",{className:"py-2 px-4 bg-primary text-white rounded-md",href:"https://wa.me/6289677600427",target:"_blank",children:"Hubungi Kami"}),o&&r.jsx("button",{onClick:d,className:"font-semibold py-2 px-4 border border-dark rounded-md",children:"Log out"})]})]})})};export{Y as default};
