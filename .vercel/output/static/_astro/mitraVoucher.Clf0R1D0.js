import{j as e}from"./jsx-runtime.CDeAccHH.js";import{s as n}from"./supabaseClient.CAFQAGi9.js";import{r as s}from"./index.AGWyUyCC.js";import{S as N,a as k}from"./swiper-react.KqFioOjf.js";import{f as y}from"./apiServices.DXWvDrVz.js";import"./index.D2MAbzvX.js";const v=[{id:1,image:"/Irma_voc.webp",title:"Mitra Penjualan Vouvher"},{id:2,image:"/Saroh_voc.webp",title:"Mitra Penjualan Vouvher"},{id:3,image:"/Istiqomah_voc.webp",title:"Mitra Penjualan Vouvher"},{id:4,image:"/Lulu_voc.webp",title:"Mitra Penjualan Vouvher"}],S=a=>e.jsx("div",{className:"w-full max-w-xl",children:e.jsx("img",{src:a.image,alt:a.title,className:"w-full h-auto rounded-xl shadow-md"})},a.id),C=()=>e.jsx("div",{className:"w-full px-4 ",children:e.jsx("div",{className:"w-full",children:e.jsxs(N,{autoplay:{delay:1e3},spaceBetween:-10,slidesPerView:1,breakpoints:{0:{slidesPerView:1,spaceBetween:10},640:{slidesPerView:2,spaceBetween:10},1024:{slidesPerView:2,spaceBetween:30}},children:[v.map(a=>e.jsx(k,{className:"py-4 px-4",children:e.jsx(S,{id:a.id,title:a.title,image:a.image})},a.id)),e.jsxs("h2",{className:"text-dark px-4",children:["Scroll ke Kanan ",">>>>"]})]})})}),_=()=>{const[a,h]=s.useState(null),[c,l]=s.useState(null),[x,j]=s.useState([]),[f,o]=s.useState(null),[b,d]=s.useState(!1),[u,m]=s.useState(!1),g=async t=>{if(t.preventDefault(),a===null||a<=0){l("Masukkan jumlah klien yang valid!");return}try{const{data:r,error:i}=await n.from("Total_Clients").update({total:a}).eq("id",1).select();i?l("Gagal memperbarui jumlah klien!"):(l("Jumlah klien berhasil diperbarui!"),m(!u),p())}catch(r){console.error("Unexpected error:",r),l("Terjadi kesalahan, coba lagi nanti.")}},p=async()=>{d(!0);try{const t=await y();j(t)}catch(t){console.error("Gagal memuat data klien:",t)}finally{d(!1)}};return s.useEffect(()=>{p();const t=async()=>{const{data:i,error:w}=await n.auth.getSession();w||!i.session?o(null):o(i.session.user)};t();const{data:r}=n.auth.onAuthStateChange(()=>{t()});return()=>{r.subscription.unsubscribe()}},[]),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container mx-auto lg:px-32",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"w-full px-4 pb-8 flex flex-col justify-center items-center",children:[e.jsxs("h3",{className:"text-2xl md:text-3xl font-semibold text-center",children:["apmcXdb",e.jsx("span",{className:"text-primary",children:"Net"})," Telah Memiliki"," ",b?e.jsx("p",{children:"..."}):e.jsx(e.Fragment,{children:x.map(t=>e.jsxs("span",{children:[t.total,"+"]},t.id))})," ","Clients untuk saat ini"]}),e.jsxs("h4",{className:"text-base text-slate-600",children:["Berikut adalah beberapa mitra Voucher dari apmcXdb",e.jsx("span",{className:"text-primary",children:"Net"})]}),f&&e.jsx(e.Fragment,{children:u?e.jsxs("form",{action:"",method:"post",onSubmit:g,className:"py-4",children:[e.jsx("input",{type:"number",name:"Update Client",id:"Update Client",value:a||"",onChange:t=>h(parseInt(t.target.value,10)),className:"border p-2 mb-2 w-full",placeholder:"Masukkan jumlah klien",required:!0}),e.jsx("button",{type:"submit",className:"w-full bg-primary text-white p-2 text-center rounded-md",children:"Simpan"}),c&&e.jsx("p",{children:c})]}):e.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 mt-4 border border-dark/50 rounded-md",children:"Update jumlah Clients"})})]}),e.jsx(C,{})]})})})};export{_ as default};
